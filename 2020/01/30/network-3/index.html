<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>计算机网络(三)：数据链路层 | BLEACH</title><meta name="description" content="计算机网络(三)：数据链路层"><meta name="keywords" content="计算机网络"><meta name="author" content="fc"><meta name="copyright" content="fc"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="计算机网络(三)：数据链路层"><meta name="twitter:description" content="计算机网络(三)：数据链路层"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta property="og:type" content="article"><meta property="og:title" content="计算机网络(三)：数据链路层"><meta property="og:url" content="http://fengce1993.github.io/2020/01/30/network-3/"><meta property="og:site_name" content="BLEACH"><meta property="og:description" content="计算机网络(三)：数据链路层"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://fengce1993.github.io/2020/01/30/network-3/"><link rel="prev" title="计算机网络(四)：网络层(一)" href="http://fengce1993.github.io/2020/02/02/network-4-1/"><link rel="next" title="计算机网络(二)：物理层" href="http://fengce1993.github.io/2020/01/28/network-2/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">BLEACH</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">8</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">1</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">1</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-数据链路层的简单模型"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text"> 1 数据链路层的简单模型</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-使用点对点信道的数据链路层"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text"> 2 使用点对点信道的数据链路层</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#21-数据链路和帧"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text"> 2.1 数据链路和帧</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#22-三个基本问题"><span class="toc_mobile_items-number">2.2.</span> <span class="toc_mobile_items-text"> 2.2 三个基本问题</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#221-封装成帧"><span class="toc_mobile_items-number">2.2.1.</span> <span class="toc_mobile_items-text"> 2.2.1 封装成帧</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#222-透明传输"><span class="toc_mobile_items-number">2.2.2.</span> <span class="toc_mobile_items-text"> 2.2.2 透明传输</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#223-差错检测"><span class="toc_mobile_items-number">2.2.3.</span> <span class="toc_mobile_items-text"> 2.2.3 差错检测</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-点对点协议-ppp"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text"> 3 点对点协议 PPP</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#31-ppp-协议的特点"><span class="toc_mobile_items-number">3.1.</span> <span class="toc_mobile_items-text"> 3.1 PPP 协议的特点</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#32-ppp-协议的帧格式"><span class="toc_mobile_items-number">3.2.</span> <span class="toc_mobile_items-text"> 3.2 PPP 协议的帧格式</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#33-ppp-协议的工作状态"><span class="toc_mobile_items-number">3.3.</span> <span class="toc_mobile_items-text"> 3.3 PPP 协议的工作状态</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#4-使用广播信道的数据链路层"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text"> 4 使用广播信道的数据链路层</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#41-局域网的数据链路层"><span class="toc_mobile_items-number">4.1.</span> <span class="toc_mobile_items-text"> 4.1 局域网的数据链路层</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#42-csmacd-协议"><span class="toc_mobile_items-number">4.2.</span> <span class="toc_mobile_items-text"> 4.2 CSMA&#x2F;CD 协议</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#5-使用广播信道的以太网"><span class="toc_mobile_items-number">5.</span> <span class="toc_mobile_items-text"> 5 使用广播信道的以太网</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#51-使用集线器的星形拓扑"><span class="toc_mobile_items-number">5.1.</span> <span class="toc_mobile_items-text"> 5.1 使用集线器的星形拓扑</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#52-以太网的信道利用率"><span class="toc_mobile_items-number">5.2.</span> <span class="toc_mobile_items-text"> 5.2 以太网的信道利用率</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#6-以太网的-mac-层"><span class="toc_mobile_items-number">6.</span> <span class="toc_mobile_items-text"> 6 以太网的 MAC 层</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#61-mac-层的硬件地址"><span class="toc_mobile_items-number">6.1.</span> <span class="toc_mobile_items-text"> 6.1 MAC 层的硬件地址</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#62-mac-帧的格式"><span class="toc_mobile_items-number">6.2.</span> <span class="toc_mobile_items-text"> 6.2 MAC 帧的格式</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#7-扩展的局域网"><span class="toc_mobile_items-number">7.</span> <span class="toc_mobile_items-text"> 7 扩展的局域网</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#71-在物理层扩展局域网"><span class="toc_mobile_items-number">7.1.</span> <span class="toc_mobile_items-text"> 7.1 在物理层扩展局域网</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#72-在数据链路层扩展局域网"><span class="toc_mobile_items-number">7.2.</span> <span class="toc_mobile_items-text"> 7.2 在数据链路层扩展局域网</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-数据链路层的简单模型"><span class="toc-number">1.</span> <span class="toc-text"> 1 数据链路层的简单模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-使用点对点信道的数据链路层"><span class="toc-number">2.</span> <span class="toc-text"> 2 使用点对点信道的数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-数据链路和帧"><span class="toc-number">2.1.</span> <span class="toc-text"> 2.1 数据链路和帧</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-三个基本问题"><span class="toc-number">2.2.</span> <span class="toc-text"> 2.2 三个基本问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#221-封装成帧"><span class="toc-number">2.2.1.</span> <span class="toc-text"> 2.2.1 封装成帧</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#222-透明传输"><span class="toc-number">2.2.2.</span> <span class="toc-text"> 2.2.2 透明传输</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#223-差错检测"><span class="toc-number">2.2.3.</span> <span class="toc-text"> 2.2.3 差错检测</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-点对点协议-ppp"><span class="toc-number">3.</span> <span class="toc-text"> 3 点对点协议 PPP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#31-ppp-协议的特点"><span class="toc-number">3.1.</span> <span class="toc-text"> 3.1 PPP 协议的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#32-ppp-协议的帧格式"><span class="toc-number">3.2.</span> <span class="toc-text"> 3.2 PPP 协议的帧格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#33-ppp-协议的工作状态"><span class="toc-number">3.3.</span> <span class="toc-text"> 3.3 PPP 协议的工作状态</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-使用广播信道的数据链路层"><span class="toc-number">4.</span> <span class="toc-text"> 4 使用广播信道的数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#41-局域网的数据链路层"><span class="toc-number">4.1.</span> <span class="toc-text"> 4.1 局域网的数据链路层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#42-csmacd-协议"><span class="toc-number">4.2.</span> <span class="toc-text"> 4.2 CSMA&#x2F;CD 协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-使用广播信道的以太网"><span class="toc-number">5.</span> <span class="toc-text"> 5 使用广播信道的以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#51-使用集线器的星形拓扑"><span class="toc-number">5.1.</span> <span class="toc-text"> 5.1 使用集线器的星形拓扑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#52-以太网的信道利用率"><span class="toc-number">5.2.</span> <span class="toc-text"> 5.2 以太网的信道利用率</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-以太网的-mac-层"><span class="toc-number">6.</span> <span class="toc-text"> 6 以太网的 MAC 层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#61-mac-层的硬件地址"><span class="toc-number">6.1.</span> <span class="toc-text"> 6.1 MAC 层的硬件地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#62-mac-帧的格式"><span class="toc-number">6.2.</span> <span class="toc-text"> 6.2 MAC 帧的格式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-扩展的局域网"><span class="toc-number">7.</span> <span class="toc-text"> 7 扩展的局域网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#71-在物理层扩展局域网"><span class="toc-number">7.1.</span> <span class="toc-text"> 7.1 在物理层扩展局域网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#72-在数据链路层扩展局域网"><span class="toc-number">7.2.</span> <span class="toc-text"> 7.2 在数据链路层扩展局域网</span></a></li></ol></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png)"><div id="post-info"><div id="post-title"><div class="posttitle">计算机网络(三)：数据链路层</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 发表于 2020-01-30<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> 更新于 2020-01-30</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>阅读量:</span><span id="busuanzi_value_page_pv"></span><span class="post-meta__separator">|</span><i class="fa fa-comments-o post-meta__icon fa-fw" aria-hidden="true"></i><span>评论数:</span><a href="/2020/01/30/network-3/#post-comment"><span class="gitalk-comment-count comment-count"></span></a></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h2 id="1-数据链路层的简单模型"><a class="markdownIt-Anchor" href="#1-数据链路层的简单模型"></a> 1 数据链路层的简单模型</h2>
<p><a href="/pic/network/3-1.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-1.png" class="lazyload"></a></p>
<p>数据链路层使用的信道主要有以下两种类型：</p>
<ul>
<li><strong>点对点信道</strong>：这种信道使用一对一的点对点通信方式。</li>
<li><strong>广播信道</strong>：这种信道使用一对多的广播通信方式，因此过程比较复杂。广播信道上连接的主机很多，因此必须使用专用的<strong>共享信道协议</strong>来协调这些主机的数据发送。</li>
</ul>
<h2 id="2-使用点对点信道的数据链路层"><a class="markdownIt-Anchor" href="#2-使用点对点信道的数据链路层"></a> 2 使用点对点信道的数据链路层</h2>
<h3 id="21-数据链路和帧"><a class="markdownIt-Anchor" href="#21-数据链路和帧"></a> 2.1 数据链路和帧</h3>
<p><strong>链路</strong>(link)：一条无源的点到点的物理线路段，中间没有任何其他的交换结点。一条链路只是一条通路的一个组成部分。</p>
<p><strong>数据链路</strong>(data link)：除了物理线路外，还必须有通信协议来控制这些数据的传输。若把实现这些协议的硬件和软件加到链路上，就构成了数据链路。</p>
<p>现在最常用的方法是使用适配器（即网卡）来实现这些协议的硬件和软件。一般的适配器都包括了数据链路层和物理层这两层的功能。</p>
<p><a href="/pic/network/3-2.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-2.png" class="lazyload"></a></p>
<h3 id="22-三个基本问题"><a class="markdownIt-Anchor" href="#22-三个基本问题"></a> 2.2 三个基本问题</h3>
<h4 id="221-封装成帧"><a class="markdownIt-Anchor" href="#221-封装成帧"></a> 2.2.1 封装成帧</h4>
<p><a href="/pic/network/3-3.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-3.png" class="lazyload"></a></p>
<p>封装成帧(framing)就是在一段数据的前后分别添加首部和尾部，然后就构成了一个帧，确定帧的界限。</p>
<p>首部和尾部的一个重要作用就是进行<strong>帧定界</strong>。</p>
<h4 id="222-透明传输"><a class="markdownIt-Anchor" href="#222-透明传输"></a> 2.2.2 透明传输</h4>
<p><a href="/pic/network/3-4.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-4.png" class="lazyload"></a></p>
<p><strong>解决透明传输问题</strong>：发送端的数据链路层在数据中出现控制字符“SOH”或“EOT”的前面插入一个转义字符“ESC”(其十六进制编码是1B)。</p>
<p>字节填充(byte stuffing)或字符填充(character stuffing)——接收端的数据链路层在将数据送往网络层之前删除插入的转义字符。</p>
<p>如果转义字符也出现数据当中，那么应在转义字符前面插入一个转义字符。当接收端收到连续的两个转义字符时，就删除其中前面的一个。</p>
<p><a href="/pic/network/3-5.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-5.png" class="lazyload"></a></p>
<h4 id="223-差错检测"><a class="markdownIt-Anchor" href="#223-差错检测"></a> 2.2.3 差错检测</h4>
<p>在传输过程中可能会产生比特差错：1 可能会变成 0 而 0 也可能变成 1。</p>
<p>在一段时间内，传输错误的比特占所传输比特总数的比率称为<strong>误码率</strong> BER (Bit Error Rate)。</p>
<p>误码率与信噪比有很大的关系。</p>
<p>为了保证数据传输的可靠性，在计算机网络传输数据时，必须采用各种差错检测措施。</p>
<p><strong>循环冗余检验的原理</strong></p>
<p>在发送端，先把数据划分为组，假定每组 <em>k</em> 个比特。假设待传送的一组数据 <em>M</em> = 101001（现在 <em>k</em> = 6）。我们在 <em>M</em> 的后面再添加供差错检测用的 <em>n</em> 位冗余码一起发送。</p>
<p>接收端对收到的每一帧进行 CRC 检验，若得出的余数 <em>R</em> = 0，则判定这个帧没有差错，就接受(accept)；若余数 <em>R</em> ≠ 0，则判定这个帧有差错，就丢弃。</p>
<p>但这种检测方法并不能确定究竟是哪一个或哪几个比特出现了差错。只要经过严格的挑选，并使用位数足够多的除数 <em>P</em>，那么出现检测不到的差错的概率就很小很小。</p>
<p><strong>冗余码的计算</strong></p>
<p>用二进制的模 2 运算进行 2<sup>n</sup> 乘 <em>M</em> 的运算，这相当于在 <em>M</em> 后面添加 <em>n</em> 个 0。</p>
<p>得到的 (<em>k</em> + <em>n</em>) 位的数除以事先选定好的长度为 (<em>n</em> + 1) 位的除数 <em>P</em>，得出商是 <em>Q</em> 而余数是 <em>R</em>，余数 <em>R</em> 比除数 <em>P</em> 少1 位，即 <em>R</em> 是 <em>n</em> 位。</p>
<p><strong>例如</strong>：现在 <em>k</em> = 6, <em>M</em> = 101001。</p>
<p>设 <em>n</em> = 3, 除数 <em>P</em> = 1101，</p>
<p>被除数是 2<sup>n</sup><em>M</em> = 101001000。</p>
<p>模 2 运算的结果是：商 <em>Q</em> = 110101，余数 <em>R</em> = 001。</p>
<p>把余数 <em>R</em> 作为冗余码添加在数据 <em>M</em> 的后面发送出去。发送的数据是：2<sup>n</sup><em>M</em> + <em>R</em> 即：101001001，共 (<em>k</em> + <em>n</em>) 位。</p>
<p><strong>帧检验序列 FCS</strong></p>
<p>在数据后面添加上的冗余码称为帧检验序列 FCS (Frame Check Sequence)。循环冗余检验 CRC 和帧检验序列 FCS并不等同。CRC 是一种常用的检错方法，而 FCS 是添加在数据后面的冗余码。FCS 可以用 CRC 这种方法得出，但 CRC 并非用来获得 FCS 的唯一方法。</p>
<p><strong>注意</strong>：仅用循环冗余检验 CRC 差错检测技术只能做到无差错接受(accept)。“无差错接受”是指：“凡是接受的帧（即不包括丢弃的帧），我们都能以非常接近于 1 的概率认为这些帧在传输过程中没有产生差错”。也就是说：“凡是接收端数据链路层接受的帧都没有传输差错”（有差错的帧就丢弃而不接受）。要做到“可靠传输”（即发送什么就收到什么）就必须再加上确认和重传机制。</p>
<h2 id="3-点对点协议-ppp"><a class="markdownIt-Anchor" href="#3-点对点协议-ppp"></a> 3 点对点协议 PPP</h2>
<h3 id="31-ppp-协议的特点"><a class="markdownIt-Anchor" href="#31-ppp-协议的特点"></a> 3.1 PPP 协议的特点</h3>
<p><a href="/pic/network/3-6.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-6.png" class="lazyload"></a></p>
<p>现在全世界使用得最多的数据链路层协议是点对点协议 PPP (Point-to-Point Protocol)。用户使用拨号电话线接入因特网时，一般都是使用 PPP 协议。</p>
<p>PPP 协议应满足的需求：简单(这是首要的要求)、封装成帧、透明性、多种网络层协议、多种类型链路、差错检测、检测连接状态、最大传送单元、网络层地址协商、数据压缩协商。</p>
<p>PPP 协议不需要的功能：纠错、流量控制、序号、多点线路、半双工或单工链路。</p>
<p><strong>PPP 协议的组成</strong></p>
<ol>
<li>一个将 IP 数据报封装到串行链路的方法。</li>
<li>链路控制协议 LCP (Link Control Protocol)。</li>
<li>网络控制协议 NCP (Network Control Protocol)。</li>
</ol>
<h3 id="32-ppp-协议的帧格式"><a class="markdownIt-Anchor" href="#32-ppp-协议的帧格式"></a> 3.2 PPP 协议的帧格式</h3>
<p><a href="/pic/network/3-7.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-7.png" class="lazyload"></a></p>
<ul>
<li>标志字段 F = 0x7E。</li>
<li>地址字段 A 只置为 0xFF。地址字段实际上并不起作用。</li>
<li>控制字段 C 通常置为 0x03。</li>
<li>PPP 有一个 2 个字节的协议字段：当协议字段为 0x0021 时，PPP 帧的信息字段就是IP 数据报；若为 0xC021, 则信息字段是 PPP 链路控制数据；若为 0x8021，则表示这是网络控制数据。</li>
<li>PPP 是面向字节的，所有的 PPP 帧的长度都是整数字节。</li>
</ul>
<p><strong>透明传输问题</strong></p>
<p>字符填充：用于异步传输。</p>
<ol>
<li>将信息字段中出现的每一个 0x7E 字节转变成为 2 字节序列(0x7D, 0x5E)。</li>
<li>若信息字段中出现一个 0x7D 的字节, 则将其转变成为 2 字节序列(0x7D, 0x5D)。</li>
<li>若信息字段中出现 ASCII 码的控制字符（即数值小于 0x20 的字符），则在该字符前面要加入一个 0x7D 字节，同时将该字符的编码加以改变。</li>
</ol>
<p>零比特填充：用于同步传输。</p>
<p>在发送端，只要发现有 5 个连续 1，则立即填入一个 0。接收端对帧中的比特流进行扫描。每当发现 5 个连续1时，就把这 5 个连续 1 后的一个 0 删除，</p>
<p><a href="/pic/network/3-8.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-8.png" class="lazyload"></a></p>
<p>PPP 协议之所以<strong>不使用序号和确认机制</strong>是出于以下的考虑：</p>
<ol>
<li>在数据链路层出现差错的概率不大时，使用比较简单的 PPP 协议较为合理。</li>
<li>在因特网环境下，PPP 的信息字段放入的数据是 IP 数据报。数据链路层的可靠传输并不能够保证网络层的传输也是可靠的。</li>
<li>帧检验序列 FCS 字段可保证无差错接受。</li>
</ol>
<h3 id="33-ppp-协议的工作状态"><a class="markdownIt-Anchor" href="#33-ppp-协议的工作状态"></a> 3.3 PPP 协议的工作状态</h3>
<p><a href="/pic/network/3-9.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-9.png" class="lazyload"></a></p>
<p><strong>整体的工作流程</strong>：</p>
<ol>
<li>当用户拨号接入 ISP 时，路由器的调制解调器对拨号做出确认，并建立一条物理连接。</li>
<li>PC 机向路由器发送一系列的链路控制协议 LCP 分组（封装成多个 PPP 帧）。</li>
<li>这些分组及其响应选择一些 PPP 参数，和进行网络层配置，网络控制协议 NCP 给新接入的 PC机分配一个临时的 IP 地址，使 PC 机成为因特网上的一个主机。</li>
<li>通信完毕时，NCP 释放网络层连接，收回原来分配出去的 IP 地址。接着，LCP 释放数据链路层连接。最后释放的是物理层的连接。</li>
</ol>
<h2 id="4-使用广播信道的数据链路层"><a class="markdownIt-Anchor" href="#4-使用广播信道的数据链路层"></a> 4 使用广播信道的数据链路层</h2>
<h3 id="41-局域网的数据链路层"><a class="markdownIt-Anchor" href="#41-局域网的数据链路层"></a> 4.1 局域网的数据链路层</h3>
<p>局域网最主要的特点是：网络为一个单位所拥有，且地理范围和站点数目均有限。</p>
<p>局域网具有如下的一些主要优点：</p>
<ol>
<li>具有广播功能，从一个站点可很方便地访问全网。局域网上的主机可共享连接在局域网上的各种硬件和软件资源。</li>
<li>便于系统的扩展和逐渐地演变，各设备的位置可灵活调整和改变。</li>
<li>提高了系统的可靠性、可用性和残存性。</li>
</ol>
<p><a href="/pic/network/3-10.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-10.png" class="lazyload"></a></p>
<p><strong>以太网的两个标准</strong>：</p>
<ol>
<li>DIX Ethernet V2 是世界上第一个局域网产品（以太网）的规约。</li>
<li>IEEE 的 802.3 标准。</li>
</ol>
<p>注意：DIX Ethernet V2 标准与 IEEE 的 802.3 标准只有很小的差别，因此可以将 802.3 局域网简称为“以太网”。严格说来，“以太网”应当是指符合 DIX Ethernet V2 标准的局域网</p>
<p><strong>数据链路层的两个子层</strong>（为了使数据链路层能更好地适应多种局域网标准，802 委员会就将局域网的数据链路层拆成两个子层）：</p>
<ul>
<li>逻辑链路控制 LLC (Logical Link Control)子层</li>
<li>媒体接入控制 MAC (Medium Access Control)子层。</li>
</ul>
<p>其中与接入到传输媒体有关的内容都放在 MAC子层，而 LLC 子层则与传输媒体无关，不管采用何种协议的局域网对 LLC 子层来说都是透明的。</p>
<p><a href="/pic/network/3-11.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-11.png" class="lazyload"></a></p>
<p>以后一般不考虑 LLC 子层，由于 TCP/IP 体系经常使用的局域网是 DIX Ethernet V2 而不是 802.3 标准中的几种局域网，因此现在 802 委员会制定的逻辑链路控制子层 LLC（即 802.2 标准）的作用已经不大了。很多厂商生产的适配器上就仅装有 MAC 协议而没有 LLC 协议。</p>
<p><strong>适配器(网卡)</strong></p>
<p>适配器的重要功能：计算机通过适配器和局域网进行通信。</p>
<ol>
<li>进行串行/并行转换。</li>
<li>对数据进行缓存。</li>
<li>在计算机的操作系统安装设备驱动程序。</li>
<li>实现以太网协议。</li>
</ol>
<p><a href="/pic/network/3-12.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-12.png" class="lazyload"></a></p>
<h3 id="42-csmacd-协议"><a class="markdownIt-Anchor" href="#42-csmacd-协议"></a> 4.2 CSMA/CD 协议</h3>
<p>最初的以太网是将许多计算机都连接到一根总线上。当初认为这样的连接方法既简单又可靠，因为总线上没有有源器件。</p>
<p><a href="/pic/network/3-13.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-13.png" class="lazyload"></a></p>
<ol>
<li>总线上的每一个工作的计算机都能检测到 B 发送的数据信号。</li>
<li>由于只有计算机 D 的地址与数据帧首部写入的地址一致，因此只有 D 才接收这个数据帧。</li>
<li>其他所有的计算机（A, C 和 E）都检测到不是发送给它们的数据帧，因此就丢弃这个数据帧而不能够收下来。</li>
<li>具有广播特性的总线上实现了一对一的通信。</li>
</ol>
<p>为了通信的简便，以太网采取了两种重要的措施：</p>
<ol>
<li>采用较为灵活的<strong>无连接</strong>的工作方式，即不必先建立连接就可以直接发送数据。</li>
<li>以太网对发送的数据帧<strong>不进行编号</strong>，也<strong>不要求对方发回确认</strong>。这样做的理由是局域网信道的质量很好，因信道质量产生差错的概率是很小的。</li>
</ol>
<p><strong>以太网提供的服务</strong>：以太网提供的服务是<strong>不可靠的交付</strong>，即尽最大努力的交付。当目的站收到有差错的数据帧时就丢弃此帧，其他什么也不做，差错的纠正由高层来决定。如果高层发现丢失了一些数据而进行重传，但以太网并不知道这是一个重传的帧，而是当作一个新的数据帧来发送。</p>
<p>以太网发送的数据都使用曼彻斯特(Manchester)编码。</p>
<p><a href="/pic/network/3-14.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-14.png" class="lazyload"></a></p>
<p><strong>载波监听多点接入/碰撞检测 CSMA/CD</strong></p>
<ul>
<li><strong>多点接入</strong>：表示许多计算机以多点接入的方式连接在一根总线上。</li>
<li><strong>载波监听</strong>：指每一个站在发送数据之前先要检测一下总线上是否有其他计算机在发送数据，如果有，则暂时不要发送数据，以免发生碰撞。</li>
<li><strong>碰撞检测</strong>：就是计算机边发送数据边检测信道上的信号电压大小。当几个站同时在总线上发送数据时，总线上的信号电压摆动值将会增大（互相叠加）。当一个站检测到的信号电压摆动值超过一定的门限值时，就认为总线上至少有两个站同时在发送数据，表明产生了碰撞；<br>
在发生碰撞时，总线上传输的信号产生了严重的失真，无法从中恢复出有用的信息来。每一个正在发送数据的站，一旦发现总线上出现了碰撞，就要立即停止发送，免得继续浪费网络资源，然后等待一段随机时间后再次发送。</li>
</ul>
<p><strong>电磁波在总线上的有限传播速率的影响</strong></p>
<p>当某个站监听到总线是空闲时，也可能总线并非真正是空闲的。 A 向 B 发出的信息，要经过一定的时间后才能传送到 B。B 若在 A 发送的信息到达 B 之前发送自己的帧(因为这时 B 的载波监听检测不到 A 所发送的信息)，则必然要在某个时间和 A 发送的帧发生碰撞。碰撞的结果是两个帧都变得无用。</p>
<p><a href="/pic/network/3-15.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-15.png" class="lazyload"></a></p>
<p><strong>重要特性</strong>：使用 CSMA/CD 协议的以太网不能进行全双工通信而只能进行半双工通信。每个站在发送数据之后的一小段时间内，存在着遭遇碰撞的可能性。 这种发送的不确定性使整个以太网的平均通信量远小于以太网的最高数据率。</p>
<p><strong>争用期</strong>：最先发送数据帧的站，在发送数据帧后至多经过时间 2<em>t</em> （两倍的端到端往返时延）就可知道发送的数据帧是否遭受了碰撞。以太网的端到端往返时延 2<em>t</em> 称为争用期或碰撞窗口。经过争用期这段时间还没有检测到碰撞，才能肯定这次发送不会发生碰撞。</p>
<p><strong>争用期的长度</strong>：以太网取 51.2 ms 为争用期的长度。对于 10 Mb/s 以太网，在争用期内可发送512 bit，即 64 字节。以太网在发送数据时，若前 64 字节没有发生冲突，则后续的数据就不会发生冲突。</p>
<p><strong>二进制指数类型退避算法</strong>：发生碰撞的站在停止发送数据后，要推迟（退避）一个随机时间才能再发送数据。</p>
<ol>
<li>确定基本退避时间，一般是取为争用期 2<em>t</em>。</li>
<li>定义重传次数 <em>k</em> ，<em>k</em>  ≤ 10，即<em>k</em> = Min[重传次数, 10]</li>
<li>从整数集合[0,1,…, (2<sup><em>k</em></sup> -1)]中随机地取出一个数记为 <em>r</em>。重传所需的时延就是 <em>r</em> 倍的基本退避时间。</li>
<li>当重传达 16 次仍不能成功时即丢弃该帧，并向高层报告。</li>
</ol>
<p><strong>最短有效帧长</strong>：如果发生冲突，就一定是在发送的前 64 字节之内。由于一检测到冲突就立即中止发送，这时已经发送出去的数据一定小于 64 字节。 以太网规定了最短有效帧长为 64 字节，凡长度小于 64 字节的帧都是由于冲突而异常中止的无效帧。</p>
<p><strong>强化碰撞</strong>：当发送数据的站一旦发现发生了碰撞时：</p>
<ol>
<li>立即停止发送数据；</li>
<li>再继续发送若干比特的人为干扰信号(jamming signal)，以便让所有用户都知道现在已经发生了碰撞。</li>
</ol>
<p><a href="/pic/network/3-16.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-16.png" class="lazyload"></a></p>
<h2 id="5-使用广播信道的以太网"><a class="markdownIt-Anchor" href="#5-使用广播信道的以太网"></a> 5 使用广播信道的以太网</h2>
<h3 id="51-使用集线器的星形拓扑"><a class="markdownIt-Anchor" href="#51-使用集线器的星形拓扑"></a> 5.1 使用集线器的星形拓扑</h3>
<p>传统以太网最初是使用粗同轴电缆，后来演进到使用比较便宜的细同轴电缆，最后发展为使用更便宜和更灵活的<strong>双绞线</strong>。这种以太网采用星形拓扑，在星形的中心则增加了一种可靠性非常高的设备，叫做<strong>集线器</strong>(hub)</p>
<p>不用电缆而使用无屏蔽双绞线。每个站需要用两对双绞线，分别用于发送和接收。集线器使用了大规模集成电路芯片，因此这样的硬件设备的可靠性已大大提高了。</p>
<p><strong>以太网在局域网中的统治地位</strong></p>
<ul>
<li>星型网 10BASE-T 的通信距离稍短，每个站到集线器的距离不超过 100 m。</li>
<li>这种 10 Mb/s 速率的无屏蔽双绞线星形网的出现，既降低了成本，又提高了可靠性。</li>
<li>10BASE-T 双绞线以太网的出现，是局域网发展史上的一个非常重要的里程碑，它为以太网在局域网中的统治地位奠定了牢固的基础。</li>
</ul>
<p><strong>集线器的特点</strong></p>
<p>集线器是使用电子器件来模拟实际电缆线的工作，因此整个系统仍然像一个传统的以太网那样运行。</p>
<p>使用集线器的以太网在逻辑上仍是一个总线网，各工作站使用的还是 CSMA/CD 协议，并共享逻辑上的总线。</p>
<p>集线器很像一个多接口的转发器，工作在物理层。</p>
<p><a href="/pic/network/3-17.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-17.png" class="lazyload"></a></p>
<h3 id="52-以太网的信道利用率"><a class="markdownIt-Anchor" href="#52-以太网的信道利用率"></a> 5.2 以太网的信道利用率</h3>
<p><a href="/pic/network/3-18.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-18.png" class="lazyload"></a></p>
<p>以太网的信道被占用的情况：</p>
<ol>
<li>争用期长度为 2<em>t</em>，即端到端传播时延的两倍。检测到碰撞后不发送干扰信号。</li>
<li>帧长为 <em>L</em> (bit)，数据发送速率为 <em>C</em> (b/s)，因而帧的发送时间为 <em>L</em>/<em>C</em> = <em>T</em><sub>0</sub> (s)。</li>
</ol>
<p>一个帧从开始发送，经可能发生的碰撞后，将再重传数次，到发送成功且信道转为空闲(即再经过时间 <em>t</em> 使得信道上无信号在传播)时为止，是发送一帧所需的平均时间。</p>
<p><strong>参数 <em>a</em></strong></p>
<p>要提高以太网的信道利用率，就必须减小 <em>t</em> 与 <em>T</em><sub>0</sub> 之比。在以太网中定义了参数 <em>a</em>，它是以太网单程端到端时延 <em>t</em> 与帧的发送时间 <em>T</em><sub>0</sub> 之比：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>=</mo><mfrac><mi>τ</mi><msub><mi>T</mi><mn>0</mn></msub></mfrac></mrow><annotation encoding="application/x-tex">a=\frac{\tau }{T_{0}}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.9435600000000002em;vertical-align:-0.8360000000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.10756em;"><span style="top:-2.3139999999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8360000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<ul>
<li>
<p><em>a</em>→0 表示一发生碰撞就立即可以检测出来，并立即停止发送，因而信道利用率很高。</p>
</li>
<li>
<p><em>a</em> 越大，表明争用期所占的比例增大，每发生一次碰撞就浪费许多信道资源，使得信道利用率明显降低。</p>
</li>
<li>
<p>当数据率一定时，以太网的连线的长度受到限制，否则 <em>t</em> 的数值会太大。</p>
</li>
<li>
<p>以太网的帧长不能太短，否则 <em>T</em><sub>0</sub> 的值会太小，使 <em>a</em> 值太大。</p>
</li>
</ul>
<p><strong>信道利用率的最大值 <em>S</em><sub>max</sub></strong></p>
<p>在理想化的情况下，以太网上的各站发送数据都不会产生碰撞（这显然已经不是 CSMA/CD，而是需要使用一种特殊的调度方法），即总线一旦空闲就有某一个站立即发送数据。</p>
<p>发送一帧占用线路的时间是 <em>T</em><sub>0</sub> + <em>t</em>，而帧本身的发送时间是 <em>T</em><sub>0</sub>。于是我们可计算出理想情况下的极限信道利用率 <em>S</em><sub>max</sub>为：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>=</mo><mfrac><msub><mi>T</mi><mn>0</mn></msub><mrow><msub><mi>T</mi><mn>0</mn></msub><mo>+</mo><mi>t</mi></mrow></mfrac><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><mi>a</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">S_{max}=\frac{T_{0}}{T_{0}+t}=\frac{1}{1+a}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.19633em;vertical-align:-0.8360000000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.3139999999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">t</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8360000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.09077em;vertical-align:-0.7693300000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">a</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693300000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<h2 id="6-以太网的-mac-层"><a class="markdownIt-Anchor" href="#6-以太网的-mac-层"></a> 6 以太网的 MAC 层</h2>
<h3 id="61-mac-层的硬件地址"><a class="markdownIt-Anchor" href="#61-mac-层的硬件地址"></a> 6.1 MAC 层的硬件地址</h3>
<p>在局域网中，硬件地址又称为物理地址，或 MAC 地址。</p>
<p>IEEE 的注册管理机构 RA 负责向厂家分配地址字段的前三个字节(即高位 24 位)。地址字段中的后三个字节(即低位 24 位)由厂家自行指派，称为扩展标识符，必须保证生产出的适配器没有重复地址。一个地址块可以生成2<sup>24</sup>个不同的地址。这种 48 位地址称为 MAC-48，它的通用名称是EUI-48。“MAC地址”实际上就是适配器地址或适配器标识符EUI-48。</p>
<p><strong>适配器检查 MAC 地址</strong></p>
<p>适配器从网络上每收到一个 MAC 帧就首先用硬件检查 MAC 帧中的 MAC 地址。</p>
<p>如果是发往本站的帧则收下，然后再进行其他的处理；否则就将此帧丢弃，不再进行其他的处理。</p>
<p>“发往本站的帧”包括以下三种帧： 单播帧（一对一）、广播帧（一对全体）、多播帧（一对多）。</p>
<h3 id="62-mac-帧的格式"><a class="markdownIt-Anchor" href="#62-mac-帧的格式"></a> 6.2 MAC 帧的格式</h3>
<p><a href="/pic/network/3-19.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-19.png" class="lazyload"></a></p>
<ul>
<li>为了达到比特同步，在传输媒体上实际传送的要比 MAC 帧还多 8 个字节。在帧的前面插入的 8 字节中的第一个字段共 7 个字节，是前同步码，用来迅速实现 MAC 帧的比特同步。第二个字段是帧开始定界符，表示后面的信息就是MAC 帧。</li>
<li>类型字段用来标志上一层使用的是什么协议，以便把收到的 MAC 帧的数据上交给上一层的这个协议。</li>
<li>数据字段的正式名称是 MAC 客户数据字段，最小长度 64 字节 - 18 字节的首部和尾部 = 数据字段的最小长度。</li>
<li>当传输媒体的误码率为 1x10<sup>-8</sup> 时，MAC 子层可使未检测到的差错小于 1x10<sup>-14</sup>。</li>
<li>当数据字段的长度小于 46 字节时，应在数据字段的后面加入整数字节的填充字段，以保证以太网的 MAC 帧长不小于 64 字节。</li>
</ul>
<p><strong>无效的 MAC 帧</strong></p>
<ul>
<li>数据字段的长度与长度字段的值不一致；</li>
<li>帧的长度不是整数个字节；</li>
<li>用收到的帧检验序列 FCS 查出有差错；</li>
<li>数据字段的长度不在 46 ~ 1500 字节之间。</li>
<li>有效的 MAC 帧长度为 64 ~ 1518 字节之间。</li>
<li>对于检查出的无效 MAC 帧就简单地丢弃。以太网不负责重传丢弃的帧。</li>
</ul>
<p><strong>帧间最小间隔</strong></p>
<p>帧间最小间隔为 9.6 ms，相当于 96 bit 的发送时间。一个站在检测到总线开始空闲后，还要等待 9.6 ms 才能再次发送数据。这样做是为了使刚刚收到数据帧的站的接收缓存来得及清理，做好接收下一帧的准备。</p>
<h2 id="7-扩展的局域网"><a class="markdownIt-Anchor" href="#7-扩展的局域网"></a> 7 扩展的局域网</h2>
<h3 id="71-在物理层扩展局域网"><a class="markdownIt-Anchor" href="#71-在物理层扩展局域网"></a> 7.1 在物理层扩展局域网</h3>
<p>用多个集线器可连成更大的局域网，且用集线器组成更大的局域网都在一个碰撞域中。</p>
<p>碰撞域：在同一个冲突域中的每一个节点都能收到所有被发送的帧。简单的说就是同一时间内只能有一台设备发送信息的范围。</p>
<p><a href="/pic/network/3-20.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-20.png" class="lazyload"></a></p>
<p><strong>用集线器扩展局域网的优缺点</strong></p>
<p>优点：使原来属于不同碰撞域的局域网上的计算机能够进行跨碰撞域的通信；扩大了局域网覆盖的地理范围。</p>
<p>缺点：碰撞域增大了，但总的吞吐量并未提高；如果不同的碰撞域使用不同的数据率，那么就不能用集线器将它们互连起来。</p>
<h3 id="72-在数据链路层扩展局域网"><a class="markdownIt-Anchor" href="#72-在数据链路层扩展局域网"></a> 7.2 在数据链路层扩展局域网</h3>
<p>在数据链路层扩展局域网是使用<strong>网桥</strong>。</p>
<p>网桥工作在数据链路层，它根据 MAC 帧的目的地址对收到的帧进行转发。</p>
<p>网桥具有过滤帧的功能。当网桥收到一个帧时，并不是向所有的接口转发此帧，而是先检查此帧的目的 MAC 地址，然后再确定将该帧转发到哪一个接口。</p>
<p>网桥使各网段成为隔离开的碰撞域。</p>
<p><a href="/pic/network/3-21.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-21.png" class="lazyload"></a></p>
<p>使用网桥带来的好处：</p>
<ul>
<li>过滤通信量；</li>
<li>扩大了物理范围；</li>
<li>提高了可靠性；</li>
<li>可互连不同物理层、不同 MAC 子层和不同速率（如10 Mb/s 和 100 Mb/s 以太网）的局域网。</li>
</ul>
<p>使用网桥带来的缺点：</p>
<ul>
<li>
<p>存储转发增加了时延。</p>
</li>
<li>
<p>在 MAC 子层并没有流量控制功能。</p>
</li>
<li>
<p>具有不同 MAC 子层的网段桥接在一起时时延更大。</p>
</li>
<li>
<p>网桥只适合于用户数不太多(不超过几百个)和通信量不太大的局域网，否则有时还会因传播过多的广播信息而产生网络拥塞。这就是所谓的广播风暴。</p>
</li>
</ul>
<p><a href="/pic/network/3-22.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-22.png" class="lazyload"></a></p>
<p>网桥和集线器的不同：集线器在转发帧时，不对传输媒体进行检测；网桥在转发帧之前必须执行 CSMA/CD 算法，若在发送过程中出现碰撞，就必须停止发送和进行退避。</p>
<p><strong>透明网桥</strong></p>
<p>目前使用得最多的网桥是透明网桥(transparent bridge)。</p>
<p>“透明”是指局域网上的站点并不知道所发送的帧将经过哪几个网桥，因为网桥对各站来说是看不见的。</p>
<p>透明网桥是一种即插即用设备，其标准是 IEEE 802.1D。</p>
<p><strong>网桥应当按照以下自学习算法处理收到的帧和建立转发表</strong></p>
<ol>
<li>若从 A 发出的帧从接口 x 进入了某网桥，那么从这个接口出发沿相反方向一定可把一个帧传送到 A。</li>
<li>网桥每收到一个帧，就记下其源地址和进入网桥的接口，作为转发表中的一个项目。</li>
<li>在建立转发表时是把帧首部中的源地址写在“地址”这一栏的下面。</li>
<li>在转发帧时，则是根据收到的帧首部中的目的地址来转发的。这时就把在“地址”栏下面已经记下的源地址当作目的地址，而把记下的进入接口当作转发接口。</li>
</ol>
<p><a href="/pic/network/3-23.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-23.png" class="lazyload"></a></p>
<p>网桥在转发表中登记以下三个信息：除了<strong>地址</strong>和<strong>接口</strong>外，还有<strong>帧进入该网桥的时间</strong>。</p>
<p>这是因为以太网的拓扑可能经常会发生变化，站点也可能会更换适配器（这就改变了站点的地址）。另外，以太网上的工作站并非总是接通电源的。把每个帧到达网桥的时间登记下来，就可以在转发表中只保留网络拓扑的最新状态信息。这样就使得网桥中的转发表能反映当前网络的最新拓扑状态。</p>
<p><strong>网桥的自学习和转发帧的步骤归纳</strong></p>
<ol>
<li>网桥收到一帧后先进行自学习。查找转发表中与收到帧的源地址有无相匹配的项目。如没有，就在转发表中增加一个项目（源地址、进入的接口和时间）。如有，则把原有的项目进行更新。</li>
<li>转发帧。查找转发表中与收到帧的目的地址有无相匹配的项目。
<ol>
<li>如没有，则通过所有其他接口（但进入网桥的接口除外）按进行转发。</li>
<li>如有，则按转发表中给出的接口进行转发。</li>
<li>若转发表中给出的接口就是该帧进入网桥的接口，则应丢弃这个帧（因为这时不需要经过网桥进行转发）。</li>
</ol>
</li>
</ol>
<p><strong>透明网桥使用了生成树算法</strong></p>
<p>这是为了避免产生转发的帧在网络中不断地兜圈子。</p>
<p><a href="/pic/network/3-24.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-24.png" class="lazyload"></a></p>
<p>互连在一起的网桥在进行彼此通信后，就能找出原来的网络拓扑的一个子集。在这个子集里，整个连通的网络中不存在回路，即在任何两个站之间只有一条路径。为了避免产生转发的帧在网络中不断地兜圈子。为了得出能够反映网络拓扑发生变化时的生成树，在生成树上的根网桥每隔一段时间还要对生成树的拓扑进行更新。</p>
<p><strong>源路由网桥</strong></p>
<p>透明网桥容易安装，但网络资源的利用不充分。源路由(source route)网桥在发送帧时将详细的路由信息放在帧的首部中。源站以广播方式向欲通信的目的站发送一个发现帧，每个发现帧都记录所经过的路由。发现帧到达目的站时就沿各自的路由返回源站。源站在得知这些路由后，从所有可能的路由中选择出一个最佳路由。凡从该源站向该目的站发送的帧的首部，都必须携带源站所确定的这一路由信息。</p>
<p><strong>多接口网桥——以太网交换机</strong></p>
<p>1990 年问世的交换式集线器(switching hub)，可明显地提高局域网的性能。交换式集线器常称为<strong>以太网交换机</strong>(switch)或第二层交换机（表明此交换机工作在数据链路层）。以太网交换机通常都有十几个接口，因此，以太网交换机实质上就是一个<strong>多接口的网桥</strong>，可见交换机工作在数据链路层。</p>
<p>以太网交换机的特点：</p>
<ul>
<li>以太网交换机的每个接口都直接与主机相连，并且一般都工作在<strong>全双工方式</strong>。</li>
<li>交换机能同时连通许多对的接口，使每一对相互通信的主机都能像独占通信媒体那样，进行无碰撞地传输数据。</li>
<li>以太网交换机由于使用了专用的交换结构芯片，其交换速率就较高。</li>
</ul>
<p>用以太网交换机扩展局域网</p>
<p><a href="/pic/network/3-25.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-25.png" class="lazyload"></a></p>
<p>利用以太网交换机可以很方便地实现<strong>虚拟局域网</strong>。</p>
<p>虚拟局域网 VLAN 是由一些局域网网段构成的与物理位置无关的逻辑组。这些网段具有某些共同的需求。每一个 VLAN 的帧都有一个明确的标识符，指明发送这个帧的工作站是属于哪一个 VLAN。虚拟局域网其实只是局域网给用户提供的一种服务，而并不是一种新型局域网</p>
<p><a href="/pic/network/3-26.png" data-fancybox="group" data-caption class="fancybox"><img alt title data-src="/pic/network/3-26.png" class="lazyload"></a></p>
<p>虚拟局域网协议允许在以太网的帧格式中插入一个 4 字节的标识符，称为 VLAN 标记(tag)，用来指明发送该帧的工作站属于哪一个虚拟局域网。</p>
<p>虚拟局域网限制了接收广播信息的工作站数，使得网络不会因传播过多的广播信息(即“广播风暴”)而引起性能恶化。</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">fc</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://fengce1993.github.io/2020/01/30/network-3/">http://fengce1993.github.io/2020/01/30/network-3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://fengce1993.github.io">BLEACH</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg" alt="微信"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="支付宝"><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/02/02/network-4-1/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>计算机网络(四)：网络层(一)</span></div></a></div><div class="next-post pull_right"><a href="/2020/01/28/network-2/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>计算机网络(二)：物理层</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/02/02/network-4-1/" title="计算机网络(四)：网络层(一)"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-02-02</div><div class="relatedPosts_title">计算机网络(四)：网络层(一)</div></div></a></div><div class="relatedPosts_item"><a href="/2020/01/28/network-2/" title="计算机网络(二)：物理层"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-01-28</div><div class="relatedPosts_title">计算机网络(二)：物理层</div></div></a></div><div class="relatedPosts_item"><a href="/2020/02/03/network-4-2/" title="计算机网络(五)：网络层(二)"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-02-03</div><div class="relatedPosts_title">计算机网络(五)：网络层(二)</div></div></a></div><div class="relatedPosts_item"><a href="/2020/02/06/network-6/" title="计算机网络(七)：应用层"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-02-06</div><div class="relatedPosts_title">计算机网络(七)：应用层</div></div></a></div><div class="relatedPosts_item"><a href="/2020/02/07/network-7/" title="计算机网络(八)：网络安全"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-02-07</div><div class="relatedPosts_title">计算机网络(八)：网络安全</div></div></a></div><div class="relatedPosts_item"><a href="/2020/02/05/network-5/" title="计算机网络(六)：运输层"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-02-05</div><div class="relatedPosts_title">计算机网络(六)：运输层</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: '98c8aa074b828fc6bd11',
  clientSecret: 'e0e862ca02f30148e7b5f049bd5a736d7831a717',
  repo: 'fengce1993.github.io',
  owner: 'fengce1993',
  admin: 'fengce1993',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN',
  updateCountCallback: commentCount
})
gitalk.render('gitalk-container')

function commentCount(n){
  document.getElementsByClassName('gitalk-comment-count')[0].innerHTML= n
}</script></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By fc</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script>$(function () {
  $('span.katex-display').wrap('<div class="katex-wrap"></div>')
})</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>